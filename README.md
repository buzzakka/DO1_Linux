## Part 1. Установка ОС
##### Установить **Ubuntu 20.04 Server LTS** без графического интерфейса. (Используем программу для виртуализации - VirtualBox).
**== Задание ==**
1) Графический интерфейс должен отсутствовать.
2) Узнайте версию Ubuntu, выполнив команду 
`cat /etc/issue.`
3) Вставьте скриншот с выводом команды.

**== Решение ==**

- Для вывода версии Ubuntu необходимо ввести команду `cat /etc/issue` .\
![part1 ubuntu version](img/1.jpg)

## Part 2. Создание

**== Задание ==**

##### Создать пользователя, отличного от пользователя, который создавался при установке. Пользователь должен быть добавлен в группу `adm`.
1) Вставьте скриншот вызова команды для создания пользователя.
2) Новый пользователь должен быть в выводе команды \
`cat /etc/passwd`
3) Вставьте скриншот с выводом команды.

**== Решение ==**

- Для создания нового пользователя была введена команда `sudo adduser new_user`, где `new_user` - имя нового пользователя. \
![part2_1 new user add](img/2_1.jpg)
- Для добавления пользователя в группу `adm` использовалась команда `usermod -a -G adm new_user` .
- Результат вывода команды `cat /etc/passwd`: \
![part2_2 cat /etc/passwd result](img/2_2.jpg)

## Part 3. Настройка сети 
**== Задание 1 ==**

##### Задать название машины вида user-1

**== Решение ==**
- Для задания названия машины использовалась следующая команда для редактирования файла через текстовый редактор vim : `sudo vim /etc/hostname` \
![part3_1 machine name change](img/3_1.jpg)
- В текстовом редакторе после перехода в режим редактирование клавишей `i` изменялось имя пользователя. Для сохранения результата выход из реадктора был осуществлен нажатием `:wq Enter`.
- Для применения изменений система перезагружалась командой `sudo reboot` .

**== Задание 2 ==**

##### Установить временную зону, соответствующую вашему текущему местоположению.

**== Решение ==**

- Для установки временной зоны на соответствующую текущему местоположению использовалась команда `sudo timedatectl set-timezone Europe/Moscow` \
![part3_3 time zone set](img/3_3.jpg)

**== Задание 3 ==**

##### Вывести названия сетевых интерфейсов с помощью консольной команды. В отчёте дать объяснение наличию интерфейса lo.

1) В отчёте дать расшифровку DHCP.

**== Решение ==**

- Для вывода названия сетевых интерфейсов можно воспользоваться командой `ls /sys/class/net/` или `ip link show` . \
![part3_4 interfaces show](img/3_4.jpg)
- Интерфейс `lo` (loopback device) - виртуальный интерфейс, присутствующий по умолчанию в любом Linux. Он используется для отладки сетевых программ и запуска серверных приложений на локальной машине. 

**== Задание 4 ==**

##### Используя консольную команду получить ip адрес устройства, на котором вы работаете, от DHCP сервера.

1) В отчёте дать расшифровку DHCP.

**== Решение ==**

- Для вывода ip адреса использовалась команда `ip address` или `hostname -I` \
![part3_5_1 ip show 1](img/3_5_1.jpg)
![part3_5_2 ip show 2](img/3_5_2.jpg)
- DHCP (Dynamic Host Configuration Protocol) - протокол динамической настройки узла.

**== Задание 5 ==**

##### Определить и вывести на экран внешний ip-адрес шлюза (ip) и внутренний IP-адрес шлюза, он же ip-адрес по умолчанию (gw).

**== Решение ==**

- Для вывода внешнего ip-адреса шлюза используется команда `curl ifconfig.me/ip`\
![part3_6 ip show](img/3_6.jpg)
- Для вывода внутреннего ip-адреса шлюза используется команда `ip route`\
![part3_7 gw show](img/3_7.jpg)

**== Задание 6 ==**

##### Задать статичные (заданные вручную, а не полученные от DHCP сервера) настройки ip, gw, dns (использовать публичный DNS серверы, например 1.1.1.1 или 8.8.8.8). 

**== Решение ==**

- Для того чтобы задать указанные настройки, необходимо узнать ip через команду `ip a`
![part3_8 ip a result](img/3_8.jpg)
- Необходимо отредактировать файл из каталога `/etc/netplan/` с расширением `YAML` . В моём случае использовалась команда `sudo vim /etc/netplan/00-installer-config.yaml`. В файле необходимо задать следующие настройкии: \
![part3_9 yaml file change](img/3_9.jpg)
- Для того, чтобы изменения вступили в силу, необходимо использовать команду `sudo netplan apply` .

**== Задание 7 ==**

##### Перезагрузить виртуальную машину. Убедиться, что статичные сетевые настройки (ip, gw, dns) соответствуют заданным в предыдущем пункте.

1) В отчёте опишите, что сделали для выполнения всех семи пунктов (можно как текстом, так и скриншотами).
2) Успешно пропинговать удаленные хосты 1.1.1.1 и ya.ru и вставить в отчёт скрин с выводом команды. В выводе команды должна быть фраза "0% packet loss".

**== Решение ==**

- После перезагрузки виртуальной машины командой `sudo reboot now` можно убедиться в том, что внесенный изменения вступили в силу. Для этого пингуем удаленные хосты 1.1.1.1 и ya.ru :\
![part3_10 ping 1.1.1.1 ping](img/3_10.jpg)
![part3_11 ping ya.ru](img/3_11.jpg)

## Part 4. Обновление ОС
**== Задание ==**

##### Обновить системные пакеты до последней на момент выполнения задания версии.  

1) После обновления системных пакетов, если ввести команду обновления повторно, должно появится сообщение, что обновления отсутствуют.
2) Вставить скриншот с этим сообщением в отчёт.

**== Решение ==**

- Для обновления системных пакетов необходимо получить их последние версии командой `sudo apt update` . После этого можно обновить системные пакеты командой `sudo apt upgrade` .
- При повторном вводе команды `sudo apt upgrate` появится информация о том, что обновления отсутствуют : \
![part4_1 no-upgrade check](img/4_1.jpg)

## Part 5. Использование команды **sudo*
**== Задание ==**

##### Разрешить пользователю, созданному в Part 2, выполнять команду sudo.
1) В отчёте объяснить *истинное* назначение команды sudo (про то, что это слово - "волшебное", писать не стоит).  
2) Поменять hostname ОС от имени пользователя, созданного в пункте Part 2 (используя sudo).
3) Вставить скрин с изменённым hostname в отчёт.

**== Решение ==**

- Для предоставления пользователю доступа к команде `sudo` использовалась команда `sudo usermod -aG sudo new_user` .
- **Sudo** (*Substitute User and do*) - программа для системного администрирования UNIX-систем, позволяющая делегировать те или иные привилегированные ресурсы пользователям с ведением протокола работы. Основная идея — дать пользователям как можно меньше прав, при этом достаточных для решения поставленных задач.
- Изменить имя можно открыв файл командой `sudo -u new_user sudo vim /etc/hostname` и изменив имя hostname.
![part5_1 machine name change](img/5_1.jpg)

## Part 6. Установка и настройка службы времени

**== Задание ==**

##### Настроить службу автоматической синхронизации времени.  

1) Вывести время, часового пояса, в котором вы сейчас находитесь.
2) Вывод следующей команды должен содержать `NTPSynchronized=yes`: \
  `timedatectl show`
3) Вставить скрины с корректным временем и выводом команды в отчёт.

**== Решение ==**

![part6_1 timedatectl show result](img/6_1.jpg)

## Part 7. Установка и использование текстовых редакторов 
**== Задание 1 ==**

##### Установить текстовые редакторы **VIM** (+ любые два по желанию **NANO**, **MCEDIT**, **JOE** и т.д.)  
##### Используя каждый из трех выбранных редакторов, создайте файл *test_X.txt*, где X -- название редактора, в котором создан файл. Напишите в нём свой никнейм, закройте файл с сохранением изменений.
1) В отчёт вставьте скриншоты:
    - Из каждого редактора с содержимым файла перед закрытием.
2) В отчёте укажите, что сделали для выхода с сохранением изменений.

**== Решение ==**

- **Vim** : cоздание файла: `vim test_vim.txt` , редактирование `i`, выход с сохранением `:wq` \
![part7_1_vim vim save quit](img/7_1_vim.jpg)
- **NANO** : cоздание файла: `nano test_nano.txt` , сохранение `ctrl + O`, выход `ctrl + X` \
![part7_1_nano nano save quit](img/7_1_nano.jpg)
- **JOE** : cоздание файла: `joe test_joe.txt` , выход `ctrl + KQ` и сохранение `y`\
![part7_1_joe joe save quit](img/7_1_joe.jpg)

**== Задание 2 ==**

##### Используя каждый из трех выбранных редакторов, откройте файл на редактирование, отредактируйте файл, заменив никнейм на строку "21 School 21", закройте файл без сохранения изменений.
1) В отчёт вставьте скриншоты:
    - Из каждого редактора с содержимым файла после редактирования.
2) В отчёте укажите, что сделали для выхода без сохранения изменений.

**== Решение ==**

- **Vim** : Выход без сохранения `:q!` \
![part7_2_vim vim no-save quit](img/7_2_vim.jpg)
- **NANO** : Выход `ctrl + X` без сохранения `N`\
![part7_2_nano nano no-save quit](img/7_2_nano.jpg)
- **JOE** : Выход `ctrl + KQ` без сохранения `n`\
![part7_2_joe joe no-save quit](img/7_2_joe.jpg)

**== Задание 3 ==**

##### Используя каждый из трех выбранных редакторов, отредактируйте файл ещё раз (по аналогии с предыдущим пунктом), а затем освойте функции поиска по содержимому файла (слово) и замены слова на любое другое.
1) В отчёт вставьте скриншоты:
    - Из каждого редактора с результатами поиска слова.
    - Из каждого редактора с командами, введёнными для замены слова на другое.

**== Решение ==**

- **Vim** : Поиск по слову: `:s/pattern` , замена слова: `:s/pattern_1/pattern_2/` , замена во всём файле: `:%s/pattern_1/pattern_2/g`\
![part7_3_1_vim_search](img/7_3_1_vim.jpg) \
![part7_3_2_vim_replace](img/7_3_2_vim.jpg)

- **NANO** : Поиск по слову: `ctrl + W` , замена слова: `alt + R` -> слово, которое надо заменить -> слово, на которое надо заменить\
![part7_3_1_nano_search](img/7_3_1_nano.jpg) \
![part7_3_2_nano_replace](img/7_3_2_nano.jpg)

- **JOE** : Поиск по слову: `ctrl + K + F` , замена слова: `alt + R` -> слово, которое надо заменить -> слово, на которое надо заменить\
![part7_3_1_joe_search](img/7_3_1_joe.jpg) \
![part7_3_2_joe_replace1](img/7_3_2_joe.jpg) \
![part7_3_3_joe_replace2](img/7_3_3_joe.jpg) \
![part7_3_4_joe_replace3](img/7_3_4_joe.jpg)


## Part 8. Установка и базовая настройка сервиса **SSHD**

**== Задание ==**

##### Установить службу SSHd.  
##### Добавить автостарт службы при загрузке системы.  
##### Перенастроить службу SSHd на порт 2022.  
##### Используя команду ps, показать наличие процесса sshd. Для этого к команде нужно подобрать ключи.
- В отчёте объяснить значение команды и каждого ключа в ней.
##### Перезагрузить систему.
- В отчёте опишите, что сделали для выполнения всех пяти пунктов (можно как текстом, так и скриншотами).
- Вывод команды netstat -tan должен содержать  \
`tcp 0 0 0.0.0.0:2022 0.0.0.0:* LISTEN`  \
(если команды netstat нет, то ее нужно установить)
- Скрин с выводом команды вставить в отчёт.
- В отчёте объяснить значение ключей -tan, значение каждого столбца вывода, значение 0.0.0.0.

**== Решение ==**

- Установка: `sudo apt install openssh-server` ;
- Автостарт службы: `sudo systemctl enable ssh` . Проверить работоспособность службы можно командой `sudo systemctl status sshd` \
![part8_1 ssh_is_enable](img/8_1.jpg)
- Перенастроить службу на порт 2022 можно перейдя в файл `sudo vim /etc/ssh/sshd_congif`, раскомментировав порт и изменив его значение \
![part8_2 port_change](img/8_2.jpg)
- `ps -C sshd` . где `-C` - для выбора процесса по имени команды, `sshd` - имя команды\
![part8_3 ps_output](img/8_3.jpg)
- `sudo reboot now` - перезагрузка .
- `netstat -tan` \
![part8_3 netstat](img/8_4.jpg) \
, где:
- `-t` (--tcp) - получение списка соединений tcp;
- `-a` (--all) - получение списка всех портов;
- `-n` (--numeric) - показывает сетевые адреса как числа;
- Столбцы:
  1) *Proto* - протокол (tcp, udp, raw), используемый сокетом;
  2) *Recv-Q* - счётчик байт не скопированных программой пользователя из этого сокета;
  3) *Send-Q* - счётчик байтов, не подтверждённых удалённым узлом;
  4) *Local Address* - адрес и номер порта локального конца сокета. Если не указана опция --numeric (-n), адрес сокета преобразуется в каноническое имя узла (FQDN), и номер порта преобразуется в соответствующее имя службы;
  5) *Foreign Address* - адрес и номер порта удалённого конца сокета. Аналогично "Local Address."
  6) *State* - состояние сокета. Listen - cокет ожидает входящих подключений.
  7) 0.0.0.0 - IP-адрес на локальной машине.

## Part 9. Установка и использование утилит **top**, **htop**

**== Задание ==**

##### Установить и запустить утилиты top и htop.  

- По выводу команды top определить и написать в отчёте:
  - uptime
  - количество авторизованных пользователей
  - общую загрузку системы
  - общее количество процессов
  - загрузку cpu
  - загрузку памяти
  - pid процесса занимающего больше всего памяти
  - pid процесса, занимающего больше всего процессорного времени
- В отчёт вставить скрин с выводом команды htop:
  - отсортированному по PID, PERCENT_CPU, PERCENT_MEM, TIME
  - отфильтрованному для процесса sshd
  - с процессом syslog, найденным, используя поиск 
  - с добавленным выводом hostname, clock и uptime

**== Решение ==**

- top
  - Uptime: 15:32:47 up 32 min ;
  - Пользователи: 1 user ;
  - Нагрузка системы: load average 0.03, 0.01, 0.00 ;
  - Процессы: 105 total ;
  - Загрузка cpu: 0,0 us, 0,3 sy, 0,0 ni, 99,7 id, 0,0 wa, 0,0 hi, 0,0 si, 0,0 st ;
  - Загрузка памяти: \
  ![part9_2 top memory](img/9_2.jpg) \
  - pid процесса занимающего больше всего памяти: 689 (сортировка по памяти `Shift + M`)\
  ![part9_3 top pid_memory](img/9_3.jpg) \
  - pid процесса, занимающего больше всего процессорного времени: 1250 (сортировка по времени  `Shift + Т`)
  ![part9_4 top pid_time](img/9_4.jpg)


![part9_1 top](img/9_1.jpg)

- htop
  - Установка: `sudo apt install htop`
  - Сортировка осуществляется клавишой `F6`
    - PID

    ![part9_5 htop sort_pid](img/9_5.jpg)

    - PERCENT_CPU

    ![part9_6 htop sort_cpu](img/9_6.jpg)

    - PERCENT_MEM

    ![part9_7 htop sort_mem](img/9_7.jpg)

    - TIME

    ![part9_8 htop sort_time](img/9_8.jpg)

  - Фильтрация осуществляется через клавишу `F4` :
  
  ![part9_9 htop filter_sshd](img/9_9.jpg)

  - Поиск осуществляется клавишей `F3` :

  ![part9_10 htop find_syslog](img/9_10.jpg)

  - Добавить вывод hostname, clock и uptime можно в настройках `F2` , добавив соответствующие колонки :

  ![part9_11 htop add_column](img/9_11.jpg)

## Part 10. Использование утилиты **fdisk**

**== Задание ==**

##### Запустить команду fdisk -l.

- В отчёте написать название жесткого диска, его размер и количество секторов, а также размер swap.

**== Решение ==**

- Результат вывода команды `sudo fdisk -l` :

![part10_1 fdisk result](img/10_1.jpg)

- Название: VBoX HARDDISK ;
- Размер: 15 GiB ;
- Количество секторов: 31457280 ;
- Размер swap: 1946 MiB

![part10_2 fdisk swap_memory](img/10_2.jpg)

## Part 11. Использование утилиты **df** 
**== Задание 1 ==**

##### Запустить команду df.  
- В отчёте написать для корневого раздела (/):
  - размер раздела
  - размер занятого пространства
  - размер свободного пространства
  - процент использования
- Определить и написать в отчёт единицу измерения в выводе.

**== Решение ==**

- Реузльтат команды `df` :

![part11_1 df result](img/11_1.jpg)

  - Размер раздела: 10218772 ;
  - Размер занятого пространства: 4860764 ;
  - Размер свободного пространства: 4817336 ;
  - Процент использования: 51 ;
- Единица измерения: килобайт .

**== Задание 2 ==**

##### Запустить команду df -Th.
- В отчёте написать для корневого раздела (/):
    - размер раздела
    - размер занятого пространства
    - размер свободного пространства
    - процент использования
- Определить и написать в отчёт тип файловой системы для раздела.

**== Решение ==**

- Результат комнады `df -Th` :

![part11_2 df -Th result](img/11_2.jpg)

  - Размер раздела: 9,8G ;
  - Размер занятого пространства: 4,7G ;
  - Размер свободного пространства: 4,5G ;
  - Процент использования: 51 ;
- Тип файловой системы: ext4 .

## Part 12. Использование утилиты **du**

**== Задание ==**

##### Запустить команду du.
##### Вывести размер папок /home, /var, /var/log (в байтах, в человекочитаемом виде)
##### Вывести размер всего содержимого в /var/log (не общее, а каждого вложенного элемента, используя *)

- В отчёт вставить скрины с выводом всех использованных команд.

**== Решение ==**

- `sudo du -h /home`

![part12_1 du /home](img/12_1.jpg)

- `sudo du -h /var`

![part12_2 du /var](img/12_2.jpg)

- `sudo du -h /var/log`

![part12_3 du /var/log](img/12_3.jpg)

- `sudo du -ha /var/log/*` :

![part12_4 du /var/log *](img/12_4.jpg)

## Part 13. Установка и использование утилиты **ncdu**

**== Задание ==**

##### Установить утилиту ncdu.
##### Вывести размер папок /home, /var, /var/log.

- Размеры должны примерно совпадать с полученными в Part 12.

- В отчёт вставить скрины с выводом использованных команд.

**== Решение ==**

- Установка ncdu: `sudo apt install ncdu` ;
- `ncdu /home` :

![part13_1 ncdu /home](img/13_1.jpg)

- `ncdu /var` :

![part13_2 ncdu /var](img/13_2.jpg)

- `ncdu /var/log` :

![part13_3 ncdu /var/log](img/13_3.jpg)

## Part 14. Работа с системными журналами

**== Задание ==**

##### Открыть для просмотра:
##### 1. /var/log/dmesg
##### 2. /var/log/syslog
##### 3. /var/log/auth.log  

- Написать в отчёте время последней успешной авторизации, имя пользователя и метод входа в систему.
- Перезапустить службу SSHd.
- Вставить в отчёт скрин с сообщением о рестарте службы (искать в логах).

**== Решение ==**

![part14_1 authorization logs](img/14_1.jpg)
![part14_2 ssh restart logs](img/14_2.jpg)

## Part 15. Использование планировщика заданий **CRON**

**== Задание ==**

##### Используя планировщик заданий, запустите команду uptime через каждые 2 минуты.
- Найти в системных журналах строчки (минимум две в заданном временном диапазоне) о выполнении.
- Вывести на экран список текущих заданий для CRON.
- Вставить в отчёт скрины со строчками о выполнении и списком текущих задач.

##### Удалите все задания из планировщика заданий.
- В отчёт вставьте скрин со списком текущих заданий для CRON.

**== Решение ==**

- Задаём событие командой `crontab -e`

![part15_0 cron make](img/15_0.jpg) 

- Строчки в логах о выполнении:

![part15_1 cron logs](img/15_1.jpg) 

- Список текущих заданий CRON:

![part15_2 cron tasks](img/15_2.jpg)

- Удаление всех заданий:

![part15_2 cron delete tasks](img/15_3.jpg)